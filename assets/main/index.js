System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,r,s,n,h,a,l,c,u,p,d,g,S,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.createForOfIteratorHelperLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,h=e._decorator,a=e.Node,l=e.Label,c=e.Prefab,u=e.UITransform,p=e.input,d=e.Input,g=e.view,S=e.instantiate,v=e.Component}],execute:function(){var f,m,b,k,y,w,z,P,T,G,L,C,H,M,x,V,A,D,R,_,I,O,U,W,E;n._RF.push({},"34885CBodVJYJm/NetQSLe8","game",void 0);var F=h.ccclass,q=h.property;e("game",(f=F("game"),m=q(a),b=q(a),k=q(a),y=q(l),w=q(l),z=q(l),P=q(l),T=q(a),G=q(a),L=q(a),C=q(c),f((x=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"startView",x,s(t)),r(t,"btnPlay",V,s(t)),r(t,"overView",A,s(t)),r(t,"labScore",D,s(t)),r(t,"labTargetScore",R,s(t)),r(t,"labTime",_,s(t)),r(t,"labLevel",I,s(t)),r(t,"rope",O,s(t)),r(t,"hook",U,s(t)),r(t,"golds",W,s(t)),r(t,"gold",E,s(t)),t.score=0,t.targetScore=150,t.time=30,t.level=1,t.isStart=!1,t.rotateSpeed=1,t.rotateDir=1,t.maxAngle=60,t.minAngle=-60,t.hookState="rotate",t.hookMaxLen=1800,t.hookMinLen=100,t.hookSpeed=8,t.curGold=null,t.normalHookSpeed=8,t.slowHookSpeed=2,t.fastHookSpeed=30,t.goldProps=new Map,t.timer=0,t}i(t,e);var n=t.prototype;return n.start=function(){this.initData(),this.initUI(),this.initEvent(),this.startGame()},n.initData=function(){this.score=0,this.targetScore=150,this.time=30,this.level=1,this.hookState="rotate",this.hookSpeed=this.normalHookSpeed,this.curGold=null,this.rope.getComponent(u).height=this.hookMinLen,this.hook.setPosition(0,-this.hookMinLen)},n.initUI=function(){this.labScore.string="分数:"+this.score,this.labTargetScore.string="目标分数:"+this.targetScore,this.labTime.string="时间:"+this.time,this.labLevel.string="关卡:"+this.level},n.initEvent=function(){p.on(d.EventType.TOUCH_START,this.onTouch,this),this.btnPlay.on(a.EventType.TOUCH_START,this.onPlay,this),this.overView.on(a.EventType.TOUCH_START,this.onRestart,this)},n.startGame=function(){this.rope.getComponent(u).height=this.hookMinLen,this.hookState="rotate",this.golds.removeAllChildren(),this.goldProps.clear();for(var e=g.getVisibleSize(),t=e.width,i=e.height,o=[{score:20,size:100,recoverSpeed:5},{score:20,size:100,recoverSpeed:5},{score:20,size:100,recoverSpeed:5},{score:50,size:160,recoverSpeed:3},{score:50,size:160,recoverSpeed:3},{score:50,size:160,recoverSpeed:3},{score:100,size:220,recoverSpeed:1.5},{score:100,size:220,recoverSpeed:1.5},{score:100,size:220,recoverSpeed:1.5},{score:50,size:160,recoverSpeed:3},{score:20,size:100,recoverSpeed:5},{score:100,size:220,recoverSpeed:1.5}],r=o.length,s=[],n=0;n<r;n++){var h=S(this.gold),a=o[n],l=a.score,c=a.size,p=a.recoverSpeed,d=h.getComponent(u);d.width=c,d.height=c;var v=void 0,f=void 0,m=0;do{v=-t/2+(n+1)*(t/(r+1));var b=-i/2+.125*i,k=i/2-.125*i;f=b+Math.random()*(k-b)*.75,m++,v+=60*(Math.random()-.5)}while(this.isOverlap(v,f,c,s)&&m<30);h.setPosition(v,f),this.golds.addChild(h),this.goldProps.set(h,{score:l,recoverSpeed:p}),s.push({x:v,y:f,size:c})}},n.resetGame=function(){this.hookState="rotate",this.hookSpeed=this.normalHookSpeed,this.curGold=null;var e=this.rope.getComponent(u);e.height=this.hookMinLen,this.hook.setPosition(0,-e.height),this.isStart=!1,this.timer=0},n.onTouch=function(e){"rotate"===this.hookState&&(this.hookState="extend")},n.onPlay=function(){this.startView.active=!1,this.isStart=!0},n.onRestart=function(){this.overView.active=!1,this.startView.active=!0,this.resetGame(),this.start()},n.update=function(e){if(this.isStart){this.timer+=e,this.timer>=1&&(this.timer=0,this.time--,this.labTime.string="时间:"+this.time,this.time<=0&&(this.time=0,this.isStart=!1,this.overView.active=!0));var t=this.rope.getComponent(u);if(this.hook.setPosition(0,-t.height),"rotate"===this.hookState){var i=this.rope.angle;i>=this.maxAngle?this.rotateDir=-1:i<=this.minAngle&&(this.rotateDir=1),this.rope.angle+=this.rotateSpeed*this.rotateDir}else if("extend"===this.hookState)if(t.height<this.hookMaxLen){if(t.height+=this.hookSpeed,!this.curGold)for(var o=0;o<this.golds.children.length;o++){var r=this.golds.children[o];if(this.checkCollisionWithHook(r)){this.curGold=r;var s=this.goldProps.get(r);this.hookState="retract",this.hookSpeed=s?s.recoverSpeed:this.slowHookSpeed;break}}}else this.hookState="retract",this.hookSpeed=this.fastHookSpeed;else if("retract"===this.hookState)if(t.height>this.hookMinLen)t.height-=this.hookSpeed,this.curGold&&this.updateGoldPosition();else{if(t.height=this.hookMinLen,this.hookState="rotate",this.hookSpeed=this.normalHookSpeed,this.curGold){var n=this.goldProps.get(this.curGold);this.score+=n?n.score:10,this.labScore.string="分数:"+this.score,this.goldProps.delete(this.curGold),this.curGold.removeFromParent(),this.curGold=null}this.hook.setPosition(0,-t.height)}}},n.checkCollisionWithHook=function(e){var t=this.hook.getWorldPosition(),i=e.getComponent(u),o=e.getWorldPosition(),r=i.width/2,s=t.x-o.x,n=t.y-o.y;return Math.sqrt(s*s+n*n)<=r},n.updateGoldPosition=function(){var e=this.hook.getWorldPosition();this.curGold.setWorldPosition(e)},n.isOverlap=function(e,t,i,r){for(var s,n=o(r);!(s=n()).done;){var h=s.value,a=(i+h.size)/2+10,l=e-h.x,c=t-h.y;if(Math.sqrt(l*l+c*c)<a)return!0}return!1},t}(v)).prototype,"startView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(M.prototype,"btnPlay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(M.prototype,"overView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(M.prototype,"labScore",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(M.prototype,"labTargetScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(M.prototype,"labTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(M.prototype,"labLevel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(M.prototype,"rope",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(M.prototype,"hook",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"golds",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(M.prototype,"gold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=M))||H));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./game.ts"],(function(){return{setters:[null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});